2026-01-30T07:56:09.229907Z  INFO ThreadId(01) vscu: src/main.rs:30: Starting VSCU middleware service
2026-01-30T07:56:09.230392Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-30T07:56:11.200154Z  INFO ThreadId(01) vscu: src/main.rs:65: Server listening on 0.0.0.0:8000
2026-01-30T07:56:33.767185Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:90: Received signup request for email: cit2211082022@mmu.ac.ke
2026-01-30T07:56:35.670870Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"user\" (\"full_name\", …" db.statement="\n\nINSERT INTO \"user\" (\"full_name\", \"email\", \"phone_number\", \"password_hash\", \"tracking_id\", \"status\", \"role\", \"agreement\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING \"id\", \"full_name\", \"email\", \"phone_number\", \"password_hash\", \"tracking_id\", \"status\", \"role\", \"agreement\", \"created_at\", \"updated_at\"\n" rows_affected=1 rows_returned=1 elapsed=614.085062ms elapsed_secs=0.614085062
2026-01-30T07:56:35.671191Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:121: User created successfully with ID: 4
2026-01-30T07:57:17.580889Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:198: Fetching user with encrypted tracking_id
2026-01-30T07:57:17.580958Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:204: ✓ ENCRYPTION_KEY is set
2026-01-30T07:57:17.580983Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:205:   - Key length (base64): 44 chars
2026-01-30T07:57:17.581042Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:206:   - Key first 10 chars: q3kP0bL8a9
2026-01-30T07:57:17.581072Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:210:   - Decoded key length: 32 bytes (expected: 32)
2026-01-30T07:57:17.581090Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:221: Received encrypted tracking_id:
2026-01-30T07:57:17.581107Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:222:   - Length: 64 chars
2026-01-30T07:57:17.581127Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:223:   - First 20 chars: AALqKW1hhrxxTkQZicWN
2026-01-30T07:57:17.581150Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:227:   - Decoded ciphertext length: 48 bytes
2026-01-30T07:57:17.581167Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:235: Attempting decryption...
2026-01-30T07:57:17.581183Z  INFO ThreadId(12) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T07:57:17.581319Z ERROR ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:238: ✗ Decryption failed: AES-GCM-SIV decryption failed: Error. This usually means wrong key or corrupted data.
2026-01-30T07:57:17.581362Z ERROR ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:44: Decryption failed: AES-GCM-SIV decryption failed: Error. This usually means wrong key or corrupted data.
2026-01-30T08:13:02.414599Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:198: Fetching user with encrypted tracking_id
2026-01-30T08:13:02.414674Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:204: ✓ ENCRYPTION_KEY is set
2026-01-30T08:13:02.414690Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:205:   - Key length (base64): 44 chars
2026-01-30T08:13:02.414710Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:206:   - Key first 10 chars: q3kP0bL8a9
2026-01-30T08:13:02.414737Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:210:   - Decoded key length: 32 bytes (expected: 32)
2026-01-30T08:13:02.414749Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:221: Received encrypted tracking_id:
2026-01-30T08:13:02.414759Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:222:   - Length: 64 chars
2026-01-30T08:13:02.414771Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:223:   - First 20 chars: pZ8tlG1rEnOX2yGhn8Nz
2026-01-30T08:13:02.414786Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:227:   - Decoded ciphertext length: 48 bytes
2026-01-30T08:13:02.414797Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:235: Attempting decryption...
2026-01-30T08:13:02.414806Z  INFO ThreadId(03) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T08:13:02.414922Z ERROR ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:238: ✗ Decryption failed: AES-GCM-SIV decryption failed: Error. This usually means wrong key or corrupted data.
2026-01-30T08:13:02.414959Z ERROR ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:44: Decryption failed: AES-GCM-SIV decryption failed: Error. This usually means wrong key or corrupted data.
2026-01-30T08:14:14.715921Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:134: Login attempt for email: cit2211082022@mmu.ac.ke
2026-01-30T08:14:14.716567Z  INFO ThreadId(12) sqlx_core::pool::inner: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:475: ping on idle connection returned error error=error communicating with database: expected to read 5 bytes, got 0 bytes at EOF
2026-01-30T08:14:17.347473Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"user\".\"id\", \"user\".\"full_name\", \"user\".\"email\", …" db.statement="\n\nSELECT \"user\".\"id\", \"user\".\"full_name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"password_hash\", \"user\".\"tracking_id\", \"user\".\"status\", \"user\".\"role\", \"user\".\"agreement\", \"user\".\"created_at\", \"user\".\"updated_at\" FROM \"user\" WHERE \"user\".\"email\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=696.864355ms elapsed_secs=0.696864355
2026-01-30T08:14:18.234327Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:158: Original tracking_id: pZ8tlG1rEnOX2yGhn8NzdTFFVott5L9UHLaEhn51pk2O2h3nutK0dBoRNiAltroi
2026-01-30T08:14:18.234381Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:163: ENCRYPTION_KEY at login:
2026-01-30T08:14:18.234387Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:164:   - Length: 44 chars
2026-01-30T08:14:18.234396Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:165:   - First 10 chars: q3kP0bL8a9
2026-01-30T08:14:18.234464Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:173: Encrypted tracking_id:
2026-01-30T08:14:18.234470Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:174:   - Length: 108 chars
2026-01-30T08:14:18.234476Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:175:   - First 20 chars: oe4H1/+2mUbl1T6ZW5iU
2026-01-30T08:14:18.234482Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:177: User logged in successfully: cit2211082022@mmu.ac.ke
2026-01-30T08:24:27.180318Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:134: Login attempt for email: admin@hawktuah.local
2026-01-30T08:24:27.180769Z  INFO ThreadId(03) sqlx_core::pool::inner: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:475: ping on idle connection returned error error=error communicating with database: expected to read 5 bytes, got 0 bytes at EOF
2026-01-30T08:24:29.901618Z  WARN ThreadId(03) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=2.7210568200000003 slow_acquire_threshold_secs=2.0
2026-01-30T08:24:30.519659Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"user\".\"id\", \"user\".\"full_name\", \"user\".\"email\", …" db.statement="\n\nSELECT \"user\".\"id\", \"user\".\"full_name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"password_hash\", \"user\".\"tracking_id\", \"user\".\"status\", \"user\".\"role\", \"user\".\"agreement\", \"user\".\"created_at\", \"user\".\"updated_at\" FROM \"user\" WHERE \"user\".\"email\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=617.847009ms elapsed_secs=0.617847009
2026-01-30T08:24:31.428125Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:158: Original tracking_id: AALqKW1hhrxxTkQZicWNM5ZrIUCgp9TShiAZti0cSNhbKnShg5fnS0WzVretxE6V
2026-01-30T08:24:31.428181Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:163: ENCRYPTION_KEY at login:
2026-01-30T08:24:31.428187Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:164:   - Length: 44 chars
2026-01-30T08:24:31.428196Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:165:   - First 10 chars: q3kP0bL8a9
2026-01-30T08:24:31.428264Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:173: Encrypted tracking_id:
2026-01-30T08:24:31.428269Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:174:   - Length: 108 chars
2026-01-30T08:24:31.428275Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:175:   - First 20 chars: maFPSP+x+ZO/zRMZO0Qk
2026-01-30T08:24:31.428280Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:177: User logged in successfully: admin@hawktuah.local
2026-01-30T08:24:45.033021Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:198: Fetching user with encrypted tracking_id
2026-01-30T08:24:45.033110Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:204: ✓ ENCRYPTION_KEY is set
2026-01-30T08:24:45.033125Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:205:   - Key length (base64): 44 chars
2026-01-30T08:24:45.033143Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:206:   - Key first 10 chars: q3kP0bL8a9
2026-01-30T08:24:45.033171Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:210:   - Decoded key length: 32 bytes (expected: 32)
2026-01-30T08:24:45.033187Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:221: Received encrypted tracking_id:
2026-01-30T08:24:45.033200Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:222:   - Length: 108 chars
2026-01-30T08:24:45.033215Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:223:   - First 20 chars: maFPSP+x+ZO/zRMZO0Qk
2026-01-30T08:24:45.033239Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:227:   - Decoded ciphertext length: 80 bytes
2026-01-30T08:24:45.033258Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:235: Attempting decryption...
2026-01-30T08:24:45.033270Z  INFO ThreadId(03) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T08:24:45.033419Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:242: ✓ Decryption successful!
2026-01-30T08:24:45.033444Z  INFO ThreadId(03) vscu::signup::signup_login: src/signup/signup_login.rs:243:   - Decrypted value: AALqKW1hhrxxTkQZicWNM5ZrIUCgp9TShiAZti0cSNhbKnShg5fnS0WzVretxE6V
2026-01-30T08:24:45.866883Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"user\".\"id\", \"user\".\"full_name\", \"user\".\"email\", …" db.statement="\n\nSELECT \"user\".\"id\", \"user\".\"full_name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"password_hash\", \"user\".\"tracking_id\", \"user\".\"status\", \"user\".\"role\", \"user\".\"agreement\", \"user\".\"created_at\", \"user\".\"updated_at\" FROM \"user\" WHERE \"user\".\"tracking_id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=563.391156ms elapsed_secs=0.563391156
2026-01-30T08:24:45.867041Z  INFO ThreadId(12) vscu::signup::signup_login: src/signup/signup_login.rs:253: User found: admin@hawktuah.local
2026-01-30T08:31:39.380624Z  INFO ThreadId(12) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T08:31:40.198376Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=547.232212ms elapsed_secs=0.547232212
2026-01-30T08:31:42.231948Z  WARN ThreadId(03) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=2.033273955 slow_acquire_threshold_secs=2.0
2026-01-30T08:31:43.462016Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=669.121772ms elapsed_secs=0.669121772
2026-01-30T08:31:44.075248Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=612.097682ms elapsed_secs=0.612097682
2026-01-30T08:31:44.369196Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=293.719233ms elapsed_secs=0.293719233
2026-01-30T08:31:44.369473Z ERROR ThreadId(03) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=4989 ms
2026-01-30T08:32:17.047858Z  INFO ThreadId(03) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T08:32:17.605122Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=286.732666ms elapsed_secs=0.286732666
2026-01-30T08:32:18.869876Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=313.83988ms elapsed_secs=0.31383988
2026-01-30T08:32:19.175045Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=304.015638ms elapsed_secs=0.304015638
2026-01-30T08:32:19.505371Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=329.914422ms elapsed_secs=0.329914422
2026-01-30T08:32:19.505667Z ERROR ThreadId(03) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=2458 ms
2026-01-30T08:32:40.482360Z  INFO ThreadId(03) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T08:32:41.026247Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=275.899472ms elapsed_secs=0.275899472
2026-01-30T08:32:42.340199Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=409.698898ms elapsed_secs=0.409698898
2026-01-30T08:32:42.641025Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=299.911397ms elapsed_secs=0.299911397
2026-01-30T08:32:42.954916Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=313.470044ms elapsed_secs=0.313470044
2026-01-30T08:32:42.955254Z ERROR ThreadId(12) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=2473 ms
2026-01-30T08:33:08.104232Z  INFO ThreadId(12) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T08:33:08.661196Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=271.611453ms elapsed_secs=0.271611453
2026-01-30T08:33:09.885641Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=307.011341ms elapsed_secs=0.307011341
2026-01-30T08:33:10.197775Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=311.117487ms elapsed_secs=0.311117487
2026-01-30T08:33:10.500933Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=302.73744ms elapsed_secs=0.30273744
2026-01-30T08:33:10.501197Z ERROR ThreadId(03) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=2397 ms
2026-01-30T08:33:17.714506Z  INFO ThreadId(01) vscu: src/main.rs:30: Starting VSCU middleware service
2026-01-30T08:33:17.715074Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-30T08:33:19.716282Z  WARN ThreadId(01) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=2.00101734 slow_acquire_threshold_secs=2.0
2026-01-30T08:33:19.718119Z  INFO ThreadId(01) vscu: src/main.rs:65: Server listening on 0.0.0.0:8000
2026-01-30T08:33:24.914596Z  INFO ThreadId(10) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T08:33:25.773440Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=576.191511ms elapsed_secs=0.576191511
2026-01-30T08:33:28.804257Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=587.647291ms elapsed_secs=0.587647291
2026-01-30T08:33:29.444193Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=638.714864ms elapsed_secs=0.638714864
2026-01-30T08:33:29.751132Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=306.573586ms elapsed_secs=0.306573586
2026-01-30T08:33:29.751469Z ERROR ThreadId(02) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=4837 ms
2026-01-30T09:01:54.518755Z  INFO ThreadId(01) vscu: src/main.rs:30: Starting VSCU middleware service
2026-01-30T09:01:54.519277Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-30T09:01:56.455378Z  INFO ThreadId(01) vscu: src/main.rs:65: Server listening on 0.0.0.0:8000
2026-01-30T09:03:37.786641Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T09:03:38.631013Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=568.071768ms elapsed_secs=0.568071768
2026-01-30T09:03:41.515214Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=643.233312ms elapsed_secs=0.643233312
2026-01-30T09:03:42.130027Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=613.798242ms elapsed_secs=0.613798242
2026-01-30T09:03:42.436717Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=306.41975ms elapsed_secs=0.30641975
2026-01-30T09:03:42.437084Z ERROR ThreadId(13) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=4651 ms
2026-01-30T09:14:52.782572Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T09:14:52.783024Z  INFO ThreadId(13) sqlx_core::pool::inner: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:475: ping on idle connection returned error error=error communicating with database: expected to read 5 bytes, got 0 bytes at EOF
2026-01-30T09:14:55.099747Z  WARN ThreadId(10) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=2.316945441 slow_acquire_threshold_secs=2.0
2026-01-30T09:14:55.714621Z  INFO ThreadId(10) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=614.682419ms elapsed_secs=0.614682419
2026-01-30T09:14:55.714917Z  INFO ThreadId(10) sqlx_core::pool::inner: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:475: ping on idle connection returned error error=error communicating with database: expected to read 5 bytes, got 0 bytes at EOF
2026-01-30T09:14:58.889323Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=615.445507ms elapsed_secs=0.615445507
2026-01-30T09:15:00.519565Z  WARN ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:125: slow statement: execution time exceeded alert threshold summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=1.628968219s elapsed_secs=1.6289682189999999 slow_threshold=1s
2026-01-30T09:15:00.798830Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=278.848047ms elapsed_secs=0.278848047
2026-01-30T09:15:00.799185Z ERROR ThreadId(03) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=8017 ms
2026-01-30T09:17:15.849343Z  INFO ThreadId(01) vscu: src/main.rs:30: Starting VSCU middleware service
2026-01-30T09:17:15.850010Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-30T09:17:17.888707Z  WARN ThreadId(01) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=2.038451632 slow_acquire_threshold_secs=2.0
2026-01-30T09:17:17.889810Z  INFO ThreadId(01) vscu: src/main.rs:65: Server listening on 0.0.0.0:8000
2026-01-30T09:17:34.413401Z  INFO ThreadId(12) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T09:17:35.356778Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=617.725773ms elapsed_secs=0.617725773
2026-01-30T09:18:01.200767Z  INFO ThreadId(13) vscu::initialization::initialize: src/initialization/initialize.rs:34: Starting initialization
2026-01-30T09:18:02.283378Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"device_serial\" = $1 LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=715.382625ms elapsed_secs=0.715382625
2026-01-30T09:18:04.798298Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"pin\" = $1 AND \"credentials\".\"environment_name\" = $2 LIMIT $3\n" rows_affected=0 rows_returned=0 elapsed=567.982986ms elapsed_secs=0.567982986
2026-01-30T09:18:05.768650Z  INFO ThreadId(08) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"credentials\" (\"company_id\", …" db.statement="\n\nINSERT INTO \"credentials\" (\"company_id\", \"environment_name\", \"environment_url\", \"pin\", \"branch_id\", \"device_serial\", \"api_key\") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING \"id\", \"company_id\", \"environment_name\", \"environment_url\", \"pin\", \"branch_id\", \"device_serial\", \"api_key\"\n" rows_affected=1 rows_returned=1 elapsed=617.268268ms elapsed_secs=0.617268268
2026-01-30T09:18:07.612251Z  INFO ThreadId(08) vscu::initialization::initialize: src/initialization/initialize.rs:34: Starting initialization
2026-01-30T09:18:08.529871Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"device_serial\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=613.926377ms elapsed_secs=0.613926377
2026-01-30T09:18:16.537868Z  INFO ThreadId(02) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T09:18:17.131220Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=307.785811ms elapsed_secs=0.307785811
2026-01-30T09:18:18.755333Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=0 rows_returned=0 elapsed=702.622903ms elapsed_secs=0.702622903
2026-01-30T09:18:19.384159Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=627.443053ms elapsed_secs=0.627443053
2026-01-30T09:18:19.384786Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:174: Inserted invoice #1 with ID 1 for api_key: dvGoQTkwdcysc5NJ03Dj53TSS04Z4caDMv4Ho8G6d1TVlP7n60HFKTmxZ01m3KY4
2026-01-30T09:18:19.655774Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=270.848324ms elapsed_secs=0.270848324
2026-01-30T09:18:19.655931Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:195: Successfully inserted 1 invoices. Starting KRA transmission...
2026-01-30T09:18:20.543513Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=591.353699ms elapsed_secs=0.591353699
2026-01-30T09:18:21.433318Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=583.575244ms elapsed_secs=0.583575244
2026-01-30T09:18:22.457972Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="UPDATE \"sales\" SET \"status\" …" db.statement="\n\nUPDATE \"sales\" SET \"status\" = $1 WHERE \"sales\".\"id\" = $2 RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=730.383821ms elapsed_secs=0.730383821
2026-01-30T09:18:22.458747Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:362: Updated record 1 status to PROCESSING
2026-01-30T09:18:22.458812Z  INFO ThreadId(13) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T09:18:22.458960Z  INFO ThreadId(13) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T09:18:22.459125Z ERROR ThreadId(13) vscu::sales::routing: src/sales/routing.rs:231: Failed to decrypt BHF_ID for record 1: AES-GCM-SIV decryption failed: Error. This usually means wrong key or corrupted data.
2026-01-30T09:18:23.070344Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=305.319822ms elapsed_secs=0.305319822
2026-01-30T09:18:23.787173Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="UPDATE \"sales\" SET \"status\" …" db.statement="\n\nUPDATE \"sales\" SET \"status\" = $1, \"retry_count\" = $2, \"next_retry_at\" = $3 WHERE \"sales\".\"id\" = $4 RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=0 rows_returned=0 elapsed=409.124956ms elapsed_secs=0.409124956
2026-01-30T09:18:51.636543Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T09:18:52.459510Z  INFO ThreadId(08) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=555.077194ms elapsed_secs=0.555077194
2026-01-30T09:18:54.506466Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=614.198148ms elapsed_secs=0.614198148
2026-01-30T09:18:55.121794Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=613.774826ms elapsed_secs=0.613774826
2026-01-30T09:18:55.122467Z  INFO ThreadId(02) vscu::sales::routing: src/sales/routing.rs:174: Inserted invoice #2 with ID 2 for api_key: dvGoQTkwdcysc5NJ03Dj53TSS04Z4caDMv4Ho8G6d1TVlP7n60HFKTmxZ01m3KY4
2026-01-30T09:18:55.416066Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=293.446935ms elapsed_secs=0.293446935
2026-01-30T09:18:55.416193Z  INFO ThreadId(02) vscu::sales::routing: src/sales/routing.rs:195: Successfully inserted 1 invoices. Starting KRA transmission...
2026-01-30T09:18:56.012890Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=276.961012ms elapsed_secs=0.276961012
2026-01-30T09:18:56.640746Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=289.642354ms elapsed_secs=0.289642354
2026-01-30T09:18:57.579028Z  INFO ThreadId(08) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="UPDATE \"sales\" SET \"status\" …" db.statement="\n\nUPDATE \"sales\" SET \"status\" = $1 WHERE \"sales\".\"id\" = $2 RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=614.650179ms elapsed_secs=0.614650179
2026-01-30T09:18:57.579739Z  INFO ThreadId(08) vscu::sales::routing: src/sales/routing.rs:362: Updated record 2 status to PROCESSING
2026-01-30T09:18:57.579793Z  INFO ThreadId(08) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T09:18:57.579926Z  INFO ThreadId(08) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T09:18:57.580040Z ERROR ThreadId(08) vscu::sales::routing: src/sales/routing.rs:231: Failed to decrypt BHF_ID for record 2: AES-GCM-SIV decryption failed: Error. This usually means wrong key or corrupted data.
2026-01-30T09:18:58.193256Z  INFO ThreadId(08) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=307.05185ms elapsed_secs=0.30705185
2026-01-30T09:18:58.776555Z  INFO ThreadId(08) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="UPDATE \"sales\" SET \"status\" …" db.statement="\n\nUPDATE \"sales\" SET \"status\" = $1, \"retry_count\" = $2, \"next_retry_at\" = $3 WHERE \"sales\".\"id\" = $4 RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=0 rows_returned=0 elapsed=276.263747ms elapsed_secs=0.276263747
2026-01-30T09:19:04.785882Z  INFO ThreadId(01) vscu: src/main.rs:30: Starting VSCU middleware service
2026-01-30T09:19:04.786395Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-30T09:19:06.694856Z  INFO ThreadId(01) vscu: src/main.rs:65: Server listening on 0.0.0.0:8000
2026-01-30T09:19:14.465930Z  INFO ThreadId(12) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-30T09:19:15.315718Z  INFO ThreadId(02) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=564.177375ms elapsed_secs=0.564177375
2026-01-30T09:19:18.469017Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"api_key\" = $1 ORDER BY \"sales\".\"generated_invc_no\" DESC LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=636.445747ms elapsed_secs=0.636445747
2026-01-30T09:19:19.082771Z  INFO ThreadId(07) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"generated_invc_no\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44) RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=612.420731ms elapsed_secs=0.612420731
2026-01-30T09:19:19.083389Z  INFO ThreadId(07) vscu::sales::routing: src/sales/routing.rs:174: Inserted invoice #3 with ID 3 for api_key: dvGoQTkwdcysc5NJ03Dj53TSS04Z4caDMv4Ho8G6d1TVlP7n60HFKTmxZ01m3KY4
2026-01-30T09:19:19.389938Z  INFO ThreadId(07) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="COMMIT" db.statement="" rows_affected=0 rows_returned=0 elapsed=306.415751ms elapsed_secs=0.306415751
2026-01-30T09:19:19.390146Z  INFO ThreadId(07) vscu::sales::routing: src/sales/routing.rs:195: Successfully inserted 1 invoices. Starting KRA transmission...
2026-01-30T09:19:20.311838Z  INFO ThreadId(07) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=615.015438ms elapsed_secs=0.615015438
2026-01-30T09:19:21.161684Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=575.291503ms elapsed_secs=0.575291503
2026-01-30T09:19:22.122371Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="UPDATE \"sales\" SET \"status\" …" db.statement="\n\nUPDATE \"sales\" SET \"status\" = $1 WHERE \"sales\".\"id\" = $2 RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=1 rows_returned=1 elapsed=582.104421ms elapsed_secs=0.582104421
2026-01-30T09:19:22.122954Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:362: Updated record 3 status to PROCESSING
2026-01-30T09:19:22.123009Z  INFO ThreadId(13) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T09:19:22.123138Z  INFO ThreadId(13) vscu::utils::crypto: src/utils/crypto.rs:116: Starting the decryption phase!
2026-01-30T09:19:22.123215Z ERROR ThreadId(13) vscu::sales::routing: src/sales/routing.rs:231: Failed to decrypt BHF_ID for record 3: AES-GCM-SIV decryption failed: Error. This usually means wrong key or corrupted data.
2026-01-30T09:19:22.769402Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", …" db.statement="\n\nSELECT \"sales\".\"id\", \"sales\".\"api_key\", \"sales\".\"status\", \"sales\".\"generated_invc_no\", \"sales\".\"created_at\", \"sales\".\"updated_at\", \"sales\".\"tin\", \"sales\".\"bhf_id\", \"sales\".\"trd_invc_no\", \"sales\".\"retry_count\", \"sales\".\"next_retry_at\", \"sales\".\"invc_no\", \"sales\".\"org_invc_no\", \"sales\".\"cust_tin\", \"sales\".\"cust_nm\", \"sales\".\"sales_ty_cd\", \"sales\".\"rcpt_ty_cd\", \"sales\".\"pmt_ty_cd\", \"sales\".\"sales_stts_cd\", \"sales\".\"cfm_dt\", \"sales\".\"sales_dt\", \"sales\".\"stock_rls_dt\", \"sales\".\"cncl_req_dt\", \"sales\".\"cncl_dt\", \"sales\".\"rfd_dt\", \"sales\".\"rfd_rsn_cd\", \"sales\".\"tot_item_cnt\", \"sales\".\"taxbl_amt_a\", \"sales\".\"taxbl_amt_b\", \"sales\".\"taxbl_amt_c\", \"sales\".\"taxbl_amt_d\", \"sales\".\"taxbl_amt_e\", \"sales\".\"tax_rt_a\", \"sales\".\"tax_rt_b\", \"sales\".\"tax_rt_c\", \"sales\".\"tax_rt_d\", \"sales\".\"tax_rt_e\", \"sales\".\"tax_amt_a\", \"sales\".\"tax_amt_b\", \"sales\".\"tax_amt_c\", \"sales\".\"tax_amt_d\", \"sales\".\"tax_amt_e\", \"sales\".\"tot_taxbl_amt\", \"sales\".\"tot_tax_amt\", \"sales\".\"tot_amt\", \"sales\".\"prchr_acptc_yn\", \"sales\".\"remark\", \"sales\".\"regr_id\", \"sales\".\"regr_nm\", \"sales\".\"modr_id\", \"sales\".\"modr_nm\", \"sales\".\"receipt\", \"sales\".\"item_list\", \"sales\".\"response\" FROM \"sales\" WHERE \"sales\".\"id\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=369.771441ms elapsed_secs=0.369771441
2026-01-30T09:19:23.348430Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="UPDATE \"sales\" SET \"status\" …" db.statement="\n\nUPDATE \"sales\" SET \"status\" = $1, \"retry_count\" = $2, \"next_retry_at\" = $3 WHERE \"sales\".\"id\" = $4 RETURNING \"id\", \"api_key\", \"status\", \"generated_invc_no\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"retry_count\", \"next_retry_at\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\", \"response\"\n" rows_affected=0 rows_returned=0 elapsed=272.042708ms elapsed_secs=0.272042708
