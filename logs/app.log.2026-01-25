2026-01-25T17:49:50.806530Z  INFO ThreadId(01) vscu: src/main.rs:29: Starting VSCU middleware service
2026-01-25T17:49:50.807069Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-25T17:49:55.241786Z  WARN ThreadId(01) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=4.434545399 slow_acquire_threshold_secs=2.0
2026-01-25T17:49:55.243262Z  INFO ThreadId(01) vscu: src/main.rs:62: Server listening on 0.0.0.0:8000
2026-01-25T17:53:27.656474Z  INFO ThreadId(04) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-25T17:53:27.656586Z  INFO ThreadId(04) vscu::sales::routing: src/sales/routing.rs:40: Payload: MyData { name: "John Kamiru", age: "24", item_name: "Laptop" }
2026-01-25T17:53:28.343952Z  INFO ThreadId(04) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=439.291331ms elapsed_secs=0.439291331
2026-01-25T18:06:02.117026Z  INFO ThreadId(04) vscu::sales::routing: src/sales/routing.rs:39: Bearer token received
2026-01-25T18:06:02.117141Z  INFO ThreadId(04) vscu::sales::routing: src/sales/routing.rs:40: Payload: MyData { name: "John Kamiru", age: "24", item_name: "Laptop" }
2026-01-25T18:06:02.117883Z  INFO ThreadId(04) sqlx_core::pool::inner: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:475: ping on idle connection returned error error=error communicating with database: expected to read 5 bytes, got 0 bytes at EOF
2026-01-25T18:06:06.509350Z  WARN ThreadId(04) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=4.391913323 slow_acquire_threshold_secs=2.0
2026-01-25T18:06:07.124957Z  INFO ThreadId(04) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=615.386668ms elapsed_secs=0.615386668
2026-01-25T18:27:14.323798Z  INFO ThreadId(01) vscu: src/main.rs:29: Starting VSCU middleware service
2026-01-25T18:27:14.324586Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-25T18:27:19.045480Z  WARN ThreadId(01) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=4.720679567 slow_acquire_threshold_secs=2.0
2026-01-25T18:27:19.048024Z  INFO ThreadId(01) vscu: src/main.rs:62: Server listening on 0.0.0.0:8000
2026-01-25T18:27:19.166093Z  INFO ThreadId(12) vscu::sales::routing: src/sales/routing.rs:33: Bearer token received
2026-01-25T18:27:19.166201Z  INFO ThreadId(12) vscu::sales::routing: src/sales/routing.rs:34: Payload: InvoicePayload([TrnsSalesSaveWrReq { tin: "P123456789Z", bhfId: "00", trdInvcNo: 123, invcNo: 15, orgInvcNo: 0, custTin: "A123456789Z", custNm: "KRA", salesTyCd: "N", rcptTyCd: "S", pmtTyCd: "01", salesSttsCd: "02", cfmDt: "20210709120300", salesDt: "20210709", stockRlsDt: "20210709120300", cnclReqDt: None, cnclDt: None, rfdDt: None, rfdRsnCd: None, totItemCnt: 2, taxblAmtA: 0.0, taxblAmtB: 250000.0, taxblAmtC: 0.0, taxblAmtD: 0.0, taxblAmtE: 0.0, taxRtA: 0.0, taxRtB: 18.0, taxRtC: 0.0, taxRtD: 0.0, taxRtE: 0.0, taxAmtA: 0.0, taxAmtB: 94576.0, taxAmtC: 0.0, taxAmtD: 0.0, taxAmtE: 0.0, totTaxblAmt: 250000.0, totTaxAmt: 38135.0, totAmt: 250000.0, prchrAcptcYn: "N", remark: None, regrId: "11999", regrNm: "TestVSCU", modrId: "45678", modrNm: "TestVSCU", receipt: ReceiptInfo { custTin: "100110263", custMblNo: None, rptNo: 1, trdeNm: "ShopWithUs Ltd", adrs: "Nairobi", topMsg: "Shop with us", btmMsg: "Welcome", prchrAcptcYn: "N" }, itemList: [TrnsSalesSaveWrItem { itemSeq: 1, itemCd: "KE1NTXU0000001", itemClsCd: "5059690800", itemNm: "OutDoorUnit", bcd: None, pkgUnitCd: "NT", pkg: 1.0, qtyUnitCd: "U", qty: 1.0, prc: 200000.0, splyAmt: 200000.0, dcRt: 0.0, dcAmt: 0.0, isrccCd: None, isrccNm: None, isrcRt: None, isrcAmt: None, taxTyCd: "B", taxblAmt: 200000.0, taxAmt: 30508.0, totAmt: 200000.0 }, TrnsSalesSaveWrItem { itemSeq: 2, itemCd: "KE1NTXU0000002", itemClsCd: "5022110801", itemNm: "NetworkCable", bcd: None, pkgUnitCd: "NT", pkg: 1.0, qtyUnitCd: "U", qty: 1.0, prc: 50000.0, splyAmt: 50000.0, dcRt: 0.0, dcAmt: 0.0, isrccCd: None, isrccNm: None, isrcRt: None, isrcAmt: None, taxTyCd: "B", taxblAmt: 50000.0, taxAmt: 7627.0, totAmt: 50000.0 }] }])
2026-01-25T18:27:19.913323Z  INFO ThreadId(13) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=505.412405ms elapsed_secs=0.505412405
2026-01-25T19:22:21.783980Z  INFO ThreadId(01) vscu: src/main.rs:29: Starting VSCU middleware service
2026-01-25T19:22:21.784464Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-25T19:22:27.000288Z  WARN ThreadId(01) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=5.215665149 slow_acquire_threshold_secs=2.0
2026-01-25T19:22:27.002011Z  INFO ThreadId(01) vscu: src/main.rs:62: Server listening on 0.0.0.0:8000
2026-01-25T19:22:27.170772Z  INFO ThreadId(13) vscu::sales::routing: src/sales/routing.rs:42: Bearer token received
2026-01-25T19:22:27.950010Z  INFO ThreadId(03) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=559.159032ms elapsed_secs=0.559159032
2026-01-25T19:22:30.590771Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"receipt\", \"item_list\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING \"id\", \"api_key\", \"status\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\"\n" rows_affected=0 rows_returned=0 elapsed=620.124973ms elapsed_secs=0.620124973
2026-01-25T19:22:30.899972Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=308.893656ms elapsed_secs=0.308893656
2026-01-25T19:22:30.900220Z ERROR ThreadId(12) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=3730 ms
2026-01-25T19:26:22.006959Z  INFO ThreadId(01) vscu: src/main.rs:29: Starting VSCU middleware service
2026-01-25T19:26:22.007485Z  WARN ThreadId(01) sqlx_postgres::options::parse: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-postgres-0.8.6/src/options/parse.rs:107: ignoring unrecognized connect parameter key=channel_binding value=require
2026-01-25T19:26:24.757789Z  WARN ThreadId(01) sqlx::pool::acquire: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/pool/inner.rs:302: acquired connection, but time to acquire exceeded slow threshold aquired_after_secs=2.75015056 slow_acquire_threshold_secs=2.0
2026-01-25T19:26:24.758813Z  INFO ThreadId(01) vscu: src/main.rs:62: Server listening on 0.0.0.0:8000
2026-01-25T19:26:29.138806Z  INFO ThreadId(11) vscu::sales::routing: src/sales/routing.rs:42: Bearer token received
2026-01-25T19:26:29.983634Z  INFO ThreadId(05) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=618.836497ms elapsed_secs=0.618836497
2026-01-25T19:26:32.543847Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"receipt\", \"item_list\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING \"id\", \"api_key\", \"status\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\"\n" rows_affected=0 rows_returned=0 elapsed=609.137167ms elapsed_secs=0.609137167
2026-01-25T19:26:32.853831Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=309.657445ms elapsed_secs=0.309657445
2026-01-25T19:26:32.854203Z ERROR ThreadId(12) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=3716 ms
2026-01-25T19:30:31.886691Z  INFO ThreadId(12) vscu::sales::routing: src/sales/routing.rs:42: Bearer token received
2026-01-25T19:30:32.353550Z  INFO ThreadId(12) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="SELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", …" db.statement="\n\nSELECT \"credentials\".\"id\", \"credentials\".\"company_id\", \"credentials\".\"environment_name\", \"credentials\".\"environment_url\", \"credentials\".\"pin\", \"credentials\".\"branch_id\", \"credentials\".\"device_serial\", \"credentials\".\"api_key\" FROM \"credentials\" WHERE \"credentials\".\"api_key\" = $1 LIMIT $2\n" rows_affected=1 rows_returned=1 elapsed=239.697774ms elapsed_secs=0.239697774
2026-01-25T19:30:33.130884Z  INFO ThreadId(10) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="INSERT INTO \"sales\" (\"api_key\", …" db.statement="\n\nINSERT INTO \"sales\" (\"api_key\", \"status\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"tot_item_cnt\", \"receipt\", \"item_list\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19) RETURNING \"id\", \"api_key\", \"status\", \"created_at\", \"updated_at\", \"tin\", \"bhf_id\", \"trd_invc_no\", \"invc_no\", \"org_invc_no\", \"cust_tin\", \"cust_nm\", \"sales_ty_cd\", \"rcpt_ty_cd\", \"pmt_ty_cd\", \"sales_stts_cd\", \"cfm_dt\", \"sales_dt\", \"stock_rls_dt\", \"cncl_req_dt\", \"cncl_dt\", \"rfd_dt\", \"rfd_rsn_cd\", \"tot_item_cnt\", \"taxbl_amt_a\", \"taxbl_amt_b\", \"taxbl_amt_c\", \"taxbl_amt_d\", \"taxbl_amt_e\", \"tax_rt_a\", \"tax_rt_b\", \"tax_rt_c\", \"tax_rt_d\", \"tax_rt_e\", \"tax_amt_a\", \"tax_amt_b\", \"tax_amt_c\", \"tax_amt_d\", \"tax_amt_e\", \"tot_taxbl_amt\", \"tot_tax_amt\", \"tot_amt\", \"prchr_acptc_yn\", \"remark\", \"regr_id\", \"regr_nm\", \"modr_id\", \"modr_nm\", \"receipt\", \"item_list\"\n" rows_affected=0 rows_returned=0 elapsed=267.567859ms elapsed_secs=0.267567859
2026-01-25T19:30:33.384022Z  INFO ThreadId(10) sqlx::query: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/sqlx-core-0.8.6/src/logger.rs:143: summary="ROLLBACK" db.statement="" rows_affected=0 rows_returned=0 elapsed=252.784338ms elapsed_secs=0.252784338
2026-01-25T19:30:33.384410Z ERROR ThreadId(10) tower_http::trace::on_failure: /home/mentor/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tower-http-0.6.8/src/trace/on_failure.rs:93: response failed classification=Status code: 500 Internal Server Error latency=1498 ms
